{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchImages(search, page, limit) {\n  const searchParams = new URLSearchParams({\n    key: '38293986-7ee0e252210be96ee05c3f9f8',\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    limit: limit,\n    page: page,\n    per_page: limit,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  return response.data;\n}\n","export default function createGalleryCards(images) {\n  return images\n    .map(image => {\n      const {\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `\n    <div class=\"card\">\n  <a class='card_link' href='${largeImageURL}'><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n  <div class=\"info\">\n    <p class=\"info_item\">\n      <b>Likes</b>\n      <b>${likes}</b>\n    </p>\n    <p class=\"info_item\">\n      <b>Views</b>\n      <b>${views}</b>\n    </p>\n    <p class=\"info_item\">\n      <b>Comments</b>\n      <b>${comments}</b>\n    </p>\n    <p class=\"info_item\">\n      <b>Downloads</b>\n      <b>${downloads}</b>\n    </p>\n  </div>\n</div>`;\n    })\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport searchImages from './js/pixabay-api';\nimport createGalleryCards from './js/render-functions';\n\nconst searchList = document.querySelector('.search-list');\nconst fetchSearchBtn = document.querySelector('.btn');\nconst inputSearch = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet search = '';\nlet lightbox;\nlet limit = 15;\nlet page = 1;\n\ninputSearch.addEventListener('input', event => {\n  search = inputSearch.value.trim();\n});\n\nfetchSearchBtn.addEventListener('click', async event => {\n  event.preventDefault();\n  searchList.innerHTML = '';\n  page = 1;\n\n  showLoader();\n  await loadImages();\n\n  if (!search) {\n    hideLoadMoreBtn();\n    iziToast.error({\n      title: 'Error',\n      message: 'Please fill out search field',\n    });\n    return;\n  }\n\n  hideLoader();\n});\n\nloadMoreButton.addEventListener('click', async event => {\n  event.preventDefault();\n\n  const cardHeight = document\n    .querySelector('.card')\n    .getBoundingClientRect().height;\n  const scrollHeight =\n    cardHeight * 2 + parseFloat(getComputedStyle(searchList).rowGap) - 200;\n\n  showLoader();\n  await loadImages();\n  scrollDown(scrollHeight);\n  hideLoader();\n});\n\nasync function loadImages() {\n  const posts = await searchImages(search, page, limit);\n  const totalPages = Math.ceil(posts.total / limit);\n\n  const galleryMarkup = createGalleryCards(posts.hits);\n  searchList.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.search-list a', {\n      captions: true,\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n\n  showLoadMoreBtn();\n\n  if (!posts.hits.length) {\n    iziToast.error({\n      title: 'Error',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n    hideLoadMoreBtn();\n    searchList.innerHTML = '';\n    return;\n  }\n\n  if (page >= totalPages) {\n    hideLoadMoreBtn();\n    iziToast.warning({\n      title: 'Warning',\n      message: `We're sorry, but you've reached the end of search results.`,\n    });\n    return;\n  }\n\n  page += 1;\n}\n\nfunction scrollDown(height) {\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreButton.style.display = 'none';\n}\n"],"names":["searchImages","search","page","limit","searchParams","axios","createGalleryCards","images","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","searchList","fetchSearchBtn","inputSearch","loader","loadMoreButton","lightbox","event","showLoader","loadImages","hideLoadMoreBtn","iziToast","hideLoader","scrollHeight","scrollDown","posts","totalPages","galleryMarkup","SimpleLightbox","showLoadMoreBtn","height"],"mappings":"owBAEe,eAAeA,EAAaC,EAAQC,EAAMC,EAAO,CAC9D,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,MAAOE,EACP,KAAMD,EACN,SAAUC,CACd,CAAG,EAGD,OADiB,MAAME,EAAM,IAAI,4BAA4BD,CAAY,EAAE,GAC3D,IAClB,CChBe,SAASE,EAAmBC,EAAQ,CACjD,OAAOA,EACJ,IAAIC,GAAS,CACZ,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA;AAAA,+BAEkBC,CAAa,eAAeC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA;AAAA,WAI1EC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAK;AAAA;AAAA;AAAA;AAAA,WAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,WAIRC,CAAS;AAAA;AAAA;AAAA,OAIpB,CAAK,EACA,KAAK,EAAE,CACZ,CC5BA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAiB,SAAS,cAAc,MAAM,EAC9CC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,gBAAgB,EAE9D,IAAInB,EAAS,GACToB,EACAlB,EAAQ,GACRD,EAAO,EAEXgB,EAAY,iBAAiB,QAASI,GAAS,CAC7CrB,EAASiB,EAAY,MAAM,MAC7B,CAAC,EAEDD,EAAe,iBAAiB,QAAS,MAAMK,GAAS,CAQtD,GAPAA,EAAM,eAAc,EACpBN,EAAW,UAAY,GACvBd,EAAO,EAEPqB,IACA,MAAMC,EAAU,EAEZ,CAACvB,EAAQ,CACXwB,IACAC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACf,CAAK,EACD,MACD,CAEDC,GACF,CAAC,EAEDP,EAAe,iBAAiB,QAAS,MAAME,GAAS,CACtDA,EAAM,eAAc,EAKpB,MAAMM,EAHa,SAChB,cAAc,OAAO,EACrB,sBAAqB,EAAG,OAEZ,EAAI,WAAW,iBAAiBZ,CAAU,EAAE,MAAM,EAAI,IAErEO,IACA,MAAMC,EAAU,EAChBK,EAAWD,CAAY,EACvBD,GACF,CAAC,EAED,eAAeH,GAAa,CAC1B,MAAMM,EAAQ,MAAM9B,EAAaC,EAAQC,EAAMC,CAAK,EAC9C4B,EAAa,KAAK,KAAKD,EAAM,MAAQ3B,CAAK,EAE1C6B,EAAgB1B,EAAmBwB,EAAM,IAAI,EAenD,GAdAd,EAAW,mBAAmB,YAAagB,CAAa,EAEnDX,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAIY,EAAe,iBAAkB,CAC9C,SAAU,GACV,aAAc,MACd,aAAc,GACpB,CAAK,EAKHC,IAEI,CAACJ,EAAM,KAAK,OAAQ,CACtBJ,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACR,CAAK,EACDD,IACAT,EAAW,UAAY,GACvB,MACD,CAED,GAAId,GAAQ6B,EAAY,CACtBN,IACAC,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,4DACf,CAAK,EACD,MACD,CAEDxB,GAAQ,CACV,CAEA,SAAS2B,EAAWM,EAAQ,CAC1B,OAAO,SAAS,CACd,IAAKA,EACL,SAAU,QACd,CAAG,CACH,CAEA,SAASZ,GAAa,CACpBJ,EAAO,MAAM,QAAU,OACzB,CAEA,SAASQ,GAAa,CACpBR,EAAO,MAAM,QAAU,MACzB,CAEA,SAASe,GAAkB,CACzBd,EAAe,MAAM,QAAU,OACjC,CAEA,SAASK,GAAkB,CACzBL,EAAe,MAAM,QAAU,MACjC"}