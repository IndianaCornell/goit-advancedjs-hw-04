{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function searchImages(search, page, limit) {\n  const searchParams = new URLSearchParams({\n    key: '38293986-7ee0e252210be96ee05c3f9f8',\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    limit: limit,\n    page: page,\n    per_page: limit,\n  });\n\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  return response.data;\n}\n","export default function createGalleryCards(images) {\n  return images\n    .map(image => {\n      const {\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `\n    <div class=\"card\">\n  <a class='card_link' href='${largeImageURL}'><img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" /></a>\n  <div class=\"info\">\n    <p class=\"info_item\">\n      <b>Likes</b>\n      <b>${likes}</b>\n    </p>\n    <p class=\"info_item\">\n      <b>Views</b>\n      <b>${views}</b>\n    </p>\n    <p class=\"info_item\">\n      <b>Comments</b>\n      <b>${comments}</b>\n    </p>\n    <p class=\"info_item\">\n      <b>Downloads</b>\n      <b>${downloads}</b>\n    </p>\n  </div>\n</div>`;\n    })\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport searchImages from './js/pixabay-api';\nimport createGalleryCards from './js/render-functions';\n\nconst searchList = document.querySelector('.search-list');\nconst fetchSearchBtn = document.querySelector('.btn');\nconst inputSearch = document.querySelector('.search-input');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet search = '';\nlet lightbox;\nlet limit = 15;\nlet page = 1;\n\ninputSearch.addEventListener('input', event => {\n  search = inputSearch.value.trim();\n});\n\nfetchSearchBtn.addEventListener('click', async event => {\n  event.preventDefault();\n  hideLoadMoreBtn();\n  searchList.innerHTML = '';\n  page = 1;\n\n  if (!search) {\n    hideLoader();\n    iziToast.error({\n      title: 'Error',\n      message: 'Please fill out search field',\n    });\n    return;\n  }\n  await loadImages();\n});\n\nloadMoreButton.addEventListener('click', async event => {\n  event.preventDefault();\n\n  const cardHeight = document\n    .querySelector('.card')\n    .getBoundingClientRect().height;\n  const scrollHeight =\n    cardHeight * 2 + parseFloat(getComputedStyle(searchList).rowGap) + 120;\n\n  await loadImages();\n  scrollDown(scrollHeight);\n});\n\nasync function loadImages() {\n  try {\n    hideLoadMoreBtn();\n    showLoader();\n\n    const posts = await searchImages(search, page, limit);\n\n    if (!posts.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      hideLoadMoreBtn();\n      searchList.innerHTML = '';\n      hideLoader();\n      return;\n    }\n\n    const totalPages = Math.ceil(posts.total / limit);\n\n    const galleryMarkup = createGalleryCards(posts.hits);\n    searchList.insertAdjacentHTML('beforeend', galleryMarkup);\n\n    if (!lightbox) {\n      lightbox = new SimpleLightbox('.search-list a', {\n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } else {\n      lightbox.refresh();\n    }\n\n    if (page >= totalPages) {\n      hideLoadMoreBtn();\n      iziToast.warning({\n        title: 'Warning',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    } else {\n      showLoadMoreBtn();\n    }\n\n    page += 1;\n    hideLoader();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `An error occurred while loading images: ${error.message}`,\n    });\n    console.error('Error in loadImages:', error);\n    hideLoadMoreBtn();\n    searchList.innerHTML = '';\n    hideLoader();\n  }\n}\n\nfunction scrollDown(height) {\n  window.scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction showLoadMoreBtn() {\n  loadMoreButton.style.display = 'block';\n}\n\nfunction hideLoadMoreBtn() {\n  loadMoreButton.style.display = 'none';\n}\n"],"names":["searchImages","search","page","limit","searchParams","axios","createGalleryCards","images","image","largeImageURL","webformatURL","tags","likes","views","comments","downloads","searchList","fetchSearchBtn","inputSearch","loader","loadMoreButton","lightbox","event","hideLoadMoreBtn","hideLoader","iziToast","loadImages","scrollHeight","scrollDown","showLoader","posts","totalPages","galleryMarkup","SimpleLightbox","showLoadMoreBtn","error","height"],"mappings":"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"}